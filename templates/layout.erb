# >---------------------------------------------------------------------------<
# 
#                   ___               ____             ____  
#                  / _ | ___  ___    / __/__________  / / /__
#                 / __ |/ _ \/ _ \  _\ \/ __/ __/ _ \/ / (_-<
#                /_/ |_/ .__/ .__/ /___/\__/_/  \___/_/_/___/
#                     /_/  /_/                               
#
#   This template was generated by App Scrolls, the amazing and awesome Rails
#     application template builder. Get started at http://appscrolls.org
#
# >---------------------------------------------------------------------------<

# >----------------------------[ Initial Setup ]------------------------------<

initializer 'generators.rb', <<-RUBY
Rails.application.config.generators do |g|
end
RUBY

@scrolls = <%= resolve_scrolls.map(&:key).inspect %> 
@diff_path = "<%= File.expand_path(Template.template_root + '/../scrolls') +'/' %>"
using_git = @scrolls.include?('git')
using_database = @scrolls.include?('mysql') || @scrolls.include?('postgresql')

<%= render "helpers" %>

<% if config_script %># >----------------------------[ Config Script ]------------------------------<

<%= config_script %><% end %>

<% resolve_scrolls.each do |scroll| %>
<%= render 'scroll', scroll.get_binding %>
<% end %>

execute_callbacks :before_everything

<% if custom_code? %># >-----------------------------[ Custom Code ]-------------------------------<

<%= custom_code %><% end %>

@current_scroll = nil

# >-----------------------------[ Run Bundler ]-------------------------------<

say_wizard "Running Bundler install. This will take a while."
run 'bundle install'
git_commit("bundle install") if using_git
rake "db:create:all" if using_database
execute_callbacks :after_bundler
execute_callbacks :after_everything
execute_callbacks :finally
